# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Postage Calculator for Greater China, available in English, Traditional Chinese and Simplified Chinese.
It's a Svelte PWA, and all functions work offline after first loading.

## Development Commands

- `npm install` - Install dependencies
- `npm run dev` - Start development server with hot reload
- `npm run build` - Build for production
- `npm run preview` - Preview production build
- `npm run check` - Run Svelte type checking
- `npm run lint` - Run ESLint
- `npm run format` - Format code with Prettier

## Architecture

### Core Components

- **PostageCalculator.svelte** - Main calculator interface with form inputs and result display
- **LanguageSwitcher.svelte** - Language selection component for EN/繁中/简中
- **postal-rates.ts** - Rate calculation logic for all three postal services
- **translations.ts** - Translation data for multilingual support
- **language.ts** - Language state management store

### Rate Calculation Logic

The app calculates rates for three postal services based on official rate tables:

- **China Post**: Domestic, Taiwan/HK/Macau, international rates
- **Chunghwa Post**: Domestic, mainland China, HK/Macau, international rates
- **Hong Kong Post**: Local, mainland China/Taiwan/Macau, international rates

Each service supports different mail types (letter, parcel, EMS, ePacket) with weight-based pricing tiers.

### PWA Features

- Service worker automatically generated by Vite PWA plugin
- Offline functionality after first load
- Installable web app manifest
- Optimized caching for fonts and assets

### Code Guidelines

Constants must be named in ALL_CAPS_SNAKE_CASE.

## References 参考资料

### China Post 中国邮政

- [中国邮政现行业务资费表（2020年版）](https://www.jiyou2020.com/archives/27.html)
- [国内邮件资费](https://www.gz.gov.cn/zwgk/zdly/jghsf/jfbz/spjg/content/post_2852139.html)
- [发改价格〔2006〕2305号 国家发展改革委、国家邮政局关于适当调整邮政基本资费的通知](https://www.gov.cn/zwgk/2006-11/20/content_447702.htm)
- [发改价格规〔2017〕629号 关于调整完善邮政普通包裹寄递资费体系结构有关问题的通知](https://www.ndrc.gov.cn/xxgk/zcfb/ghxwj/201704/t20170412_960915.html)
- [台湾、香港、澳门地区函件资费表](https://www.chinapost.com.cn/xhtml1/report/19101/1784-1.htm)
- [国际函件资费表](https://www.chinapost.com.cn/xhtml1/report/19101/1959-1.htm)

### Chunghwa Post 中華郵政

- [國內郵件資費表](https://www.post.gov.tw/post/internet/Postal/index.jsp?ID=20501)
- [國內包裹資費表](https://www.post.gov.tw/post/internet/Postal/index.jsp?ID=2050106)
- [國際函件資費表](https://www.post.gov.tw/post/internet/Postal/index.jsp?ID=20503)
- [國際e小包資費表](https://www.post.gov.tw/post/internet/Postal/index.jsp?ID=1521427719836)
- [國際包裹資費表](https://www.post.gov.tw/post/internet/Postal/index.jsp?ID=2050401)
- [大陸郵件資費表](https://www.post.gov.tw/post/internet/Postal/index.jsp?ID=20505)
- [兩岸郵政速遞(快捷)郵件資費表](https://www.post.gov.tw/post/internet/Postal/index.jsp?ID=1396492589492)
- [兩岸郵政e小包資費表](https://www.post.gov.tw/post/internet/Postal/index.jsp?ID=1404380075391)

### Hongkong Post 香港郵政

- [香港郵政- 郵費](https://www.hongkongpost.hk/tc/other/2022/postage/index.html)

### Correlos e Telecomunicações de Macau 澳門郵電

- [服務收費](https://www.ctt.gov.mo/macaupost/Contents/CorresPostage.aspx)
